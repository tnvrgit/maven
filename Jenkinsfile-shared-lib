@Library('shared-lib@main') _ 

pipeline{

      agent any 
        environment {
            branch = "${env.GIT_BRANCH}"
        }
        tools {
            maven 'maven'
        }
        stages {
            stage('Git Checkout'){
                  steps{
                     git credentialsId: 'git-creds', url: 'https://github.com/tnvrgit/maven' 
               	     }  
                 }	
            stage('maven build'){
                  steps{
                        sh 'echo maven stage'
                        sh 'mvn -f my-app/pom.xml clean install '
               	     }  
                 }	
            stage ('Check logs') {
                    steps {
                        filterLogs ('WARNING', 1)
                    }
                }     

          }
   	     	         
}